# render.yaml — Render IaC for one-click deploy
# Docs: https://render.com/docs/blueprint-spec

services:
  - type: web
    name: gc-gamma-collector
    runtime: python
    region: singapore   # Closest to IST — change to frankfurt/ohio if preferred
    plan: starter       # Required for always-on (no sleep). ~$7/month.
    rootDir: backend/render
    buildCommand: pip install -r requirements.txt
    startCommand: uvicorn app:app --host 0.0.0.0 --port $PORT
    healthCheckPath: /health

    envVars:
      - key: SUPABASE_URL
        sync: false          # Set manually in Render dashboard
      - key: SUPABASE_KEY
        sync: false
      - key: UPSTOX_ACCESS_TOKEN
        sync: false          # Updated daily via POST /set-token
      - key: COLLECT_INTERVAL_MINS
        value: "15"
      - key: FILTER_STRIKES_RADIUS
        value: "20"
